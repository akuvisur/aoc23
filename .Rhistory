num_cells
input[cur_y,cur_x]
unique(input)
num_cells <- 0
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
# non route pipe pieces are counted!
if (nrow(check_route) == 0 & input[cur_y,cur_x] %in% c("|","L","J","F","7","-")) {
num_cells <- num_cells + 1
print("not on route")
next
}
if (nrow(check_route) == 1) next
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) next
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
num_cells <- num_cells + 1
}
}
}
num_cells
nrow(route)+5149
140*140
getDirForChar <- function(x) {
if (x == "|") {
list(UP,DOWN)
}
else if (x == "-") {
list(LEFT,RIGHT)
}
else if (x == "L") {
list(UP,RIGHT)
}
else if (x == "J") {
list(UP,LEFT)
}
else if (x == "7") {
list(LEFT,DOWN)
}
else if (x == "F") {
list(DOWN,RIGHT)
}
}
file <- "input10test5.txt"
input <- readLines(file) %>% sapply(strsplit, NULL) %>% unlist() %>% matrix(ncol=length(readLines(file))) %>% t()
DOWN <- c(1,0)
UP <- c(-1,0)
LEFT <- c(0,-1)
RIGHT <- c(0,1)
start <- list(which(input == "S", arr.ind=TRUE)[1],which(input == "S", arr.ind=TRUE)[2]) %>% unlist()
#UP
upcoords <- input[start[1]+UP[1],start[2]+UP[2]]
downcoords <- input[start[1]+DOWN[1],start[2]+DOWN[2]]
leftcoords <- input[start[1]+LEFT[1],start[2]+LEFT[2]]
rightcoords <- input[start[1]+RIGHT[1],start[2]+RIGHT[2]]
if (upcoords %in% c("|","7","F")) {
step <- c(start[1]+UP[1],start[2]+UP[2])
}
if (downcoords %in% c("|","L","J")) {
step <- c(start[1]+DOWN[1],start[2]+DOWN[2])
}
if (leftcoords %in% c("-","F","L")) {
step <- c(start[1]+LEFT[1],start[2]+LEFT[2])
}
if (rightcoords %in% c("-","J","7")) {
step <- c(start[1]+RIGHT[1],start[2]+RIGHT[2])
}
# already took starting step
num_steps <- 1
prev_step <- start
route <- data.frame(
x=numeric(),
y=numeric(),
symbol=character(),
dir=numeric()
)
route[nrow(route)+1,] <- c(
x=start[2],
y=start[1],
symbol=input[start[1],start[2]],
dir=0
)
prev_step <- start
while(TRUE) {
num_steps <- num_steps + 1
if (input[step[1],step[2]] == "S") {
print("ANIMAL")
break
}
route[nrow(route)+1,] <- c(
x=step[2],
y=step[1],
symbol=input[step[1],step[2]],
dir=prev_step[1]-step[1]
)
a <- getDirForChar(input[step[1],step[2]])
s1 <- step + a[[1]]
s2 <- step + a[[2]]
if (all(s1 == prev_step)) {
prev_step <- step
step <- s2
}
else if (all(s2 == prev_step)) {
prev_step <- step
step <- s1
}
}
as.integer(num_steps/2)
require(ggplot2)
ggplot(route, aes(x=as.numeric(x),y=-as.numeric(y))) + geom_raster()
route$x <- as.numeric(route$x)
route$y <- as.numeric(route$y)
num_cells <- 0
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
# non route pipe pieces are counted!
if (nrow(check_route) == 0 & input[cur_y,cur_x] %in% c("|","L","J","F","7","-")) {
num_cells <- num_cells + 1
print("not on route")
next
}
if (nrow(check_route) == 1) next
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) next
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
num_cells <- num_cells + 1
}
}
}
num_cells
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
View(outside)
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
num_cells <- 0
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
# non route pipe pieces are counted!
if (nrow(check_route) == 0 & input[cur_y,cur_x] %in% c("|","L","J","F","7","-")) {
num_cells <- num_cells + 1
print("not on route")
next
}
if (nrow(check_route) == 1) next
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) next
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
num_cells <- num_cells + 1
}
}
}
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
num_cells <- 0
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
# non route pipe pieces are counted!
if (nrow(check_route) == 0 & input[cur_y,cur_x] %in% c("|","L","J","F","7","-")) {
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
num_cells <- num_cells + 1
print("not on route")
next
}
if (nrow(check_route) == 1) next
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) next
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
num_cells <- num_cells + 1
}
}
}
View(outside)
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
num_cells <- 0
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
if (nrow(check_route) == 1) next
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) next
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
num_cells <- num_cells + 1
}
}
}
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
num_cells <- 0
input2 <- input
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
num_cells <- 0
input2 <- input
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
if (nrow(check_route) == 1) {
input2[cur_y,cur_x] <- 2
next
}
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) {
input2[cur_y,cur_x] <- 0
next
}
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
input2[cur_y,cur_x] <- 1
num_cells <- num_cells + 1
}
}
}
input2
cur_y <- 5
cur_x <- 11
check_route <- subset(route, y == cur_y & x == cur_x)
if (nrow(check_route) == 1) {
input2[cur_y,cur_x] <- 2
next
}
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
cur_x <- 12
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
input2[input2 == 2]
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
num_cells <- 0
input2 <- input
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
if (nrow(check_route) == 1) {
input2[cur_y,cur_x] <- 1
next
}
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) {
input2[cur_y,cur_x] <- 0
next
}
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
input2[cur_y,cur_x] <- 1
num_cells <- num_cells + 1
}
}
}
num_cells
input2
count(input2[!input2 %in% c("0","1")])
sum(input2[!input2 %in% c("0","1")])
(input2[!input2 %in% c("0","1")])
length((input2[!input2 %in% c("0","1")]))
ggplot(input2, aes(x=x,y=y,fill=symbol)) + geom_raster()
ggplot(as.data.frame(input2), aes(x=x,y=y,fill=symbol)) + geom_raster()
input2
ggplot(as.data.frame(input2),aes(x=x,y=y)) + geom_raster()
cur_y <- 7
cur_x <- 15
check_route <- subset(route, y == cur_y & x == cur_x)
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0
nrow(ss_right) %% 2 == 1
print(paste(cur_y,cur_x,": is outside",sep=" "))
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
num_cells <- 0
input2 <- input
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
if (nrow(check_route) == 1) {
input2[cur_y,cur_x] <- 1
next
}
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) {
input2[cur_y,cur_x] <- 0
next
}
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
input2[cur_y,cur_x] <- 2
num_cells <- num_cells + 1
}
}
}
num_cells
input2
length((input2[!input2 %in% c("0","1","2")]))
length((input2[!input2 %in% c("0","1")]))
file <- "input10.txt"
input <- readLines(file) %>% sapply(strsplit, NULL) %>% unlist() %>% matrix(ncol=length(readLines(file))) %>% t()
DOWN <- c(1,0)
UP <- c(-1,0)
LEFT <- c(0,-1)
RIGHT <- c(0,1)
start <- list(which(input == "S", arr.ind=TRUE)[1],which(input == "S", arr.ind=TRUE)[2]) %>% unlist()
#UP
upcoords <- input[start[1]+UP[1],start[2]+UP[2]]
downcoords <- input[start[1]+DOWN[1],start[2]+DOWN[2]]
leftcoords <- input[start[1]+LEFT[1],start[2]+LEFT[2]]
rightcoords <- input[start[1]+RIGHT[1],start[2]+RIGHT[2]]
if (upcoords %in% c("|","7","F")) {
step <- c(start[1]+UP[1],start[2]+UP[2])
}
if (downcoords %in% c("|","L","J")) {
step <- c(start[1]+DOWN[1],start[2]+DOWN[2])
}
if (leftcoords %in% c("-","F","L")) {
step <- c(start[1]+LEFT[1],start[2]+LEFT[2])
}
if (rightcoords %in% c("-","J","7")) {
step <- c(start[1]+RIGHT[1],start[2]+RIGHT[2])
}
# already took starting step
num_steps <- 1
prev_step <- start
route <- data.frame(
x=numeric(),
y=numeric(),
symbol=character(),
dir=numeric()
)
route[nrow(route)+1,] <- c(
x=start[2],
y=start[1],
symbol=input[start[1],start[2]],
dir=0
)
prev_step <- start
while(TRUE) {
num_steps <- num_steps + 1
if (input[step[1],step[2]] == "S") {
print("ANIMAL")
break
}
route[nrow(route)+1,] <- c(
x=step[2],
y=step[1],
symbol=input[step[1],step[2]],
dir=prev_step[1]-step[1]
)
a <- getDirForChar(input[step[1],step[2]])
s1 <- step + a[[1]]
s2 <- step + a[[2]]
if (all(s1 == prev_step)) {
prev_step <- step
step <- s2
}
else if (all(s2 == prev_step)) {
prev_step <- step
step <- s1
}
}
as.integer(num_steps/2)
require(ggplot2)
ggplot(route, aes(x=as.numeric(x),y=-as.numeric(y))) + geom_raster()
route$x <- as.numeric(route$x)
route$y <- as.numeric(route$y)
outside <- data.frame(
x=numeric(),
y=numeric(),
symbol=character()
)
num_cells <- 0
input2 <- input
for (cur_y in 1:nrow(input)) {
for (cur_x in 1:ncol(input)) {
check_route <- subset(route, y == cur_y & x == cur_x)
if (nrow(check_route) == 1) {
input2[cur_y,cur_x] <- 1
next
}
ss_right <- subset(route, y == cur_y & x > cur_x)
ss_left <- subset(route, y == cur_y & x < cur_x)
ss_up <- subset(route, y > cur_y & x == cur_x)
ss_down <- subset(route, y < cur_y & x == cur_x)
if (nrow(ss_right)*nrow(ss_left)*nrow(ss_up)*nrow(ss_down) == 0) {
input2[cur_y,cur_x] <- 0
next
}
#if (nrow(ss_right) == nrow(ss_left)) next
if (nrow(ss_right) %% 2 == 1) {
print(paste(cur_y,cur_x,": is outside",sep=" "))
outside[nrow(outside)+1,] <- c(
x=cur_x,
y=cur_y,
symbol=input[cur_y,cur_x]
)
input2[cur_y,cur_x] <- 2
num_cells <- num_cells + 1
}
}
}
length((input2[!input2 %in% c("0","1")]))
num_cells
